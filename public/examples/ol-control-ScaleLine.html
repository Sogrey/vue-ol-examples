<!--
CodeSandbox 分享文件
生成时间: 2025/11/23 16:58:33
页面标题: OpenLayers 比例尺控件
原始页面链接: https://sogrey.top/CodeSandbox/
-->

<!-- CodeSandbox Template File -->
<!-- 该文件包含完整的模板数据和设置信息，可以被重新导入 -->
<engine-type>openlayers</engine-type>
<title>OpenLayers 比例尺控件</title>
<meta name="description" content="比例尺表示图上距离与实际距离之比，反映客观世界的尺度。OpenLayers比例尺控件默认显示在地图左下角，可以通过修改CSS样式进行调整。" />
<template>
<div id="map"></div>
<div class="custome-scale-line" id="custome-scale-line"></div>
</template>
<script>
console.log(ol)

// 创建比例尺控件
const scaleLineControl = new ol.control.ScaleLine({
  units: 'metric', // 'degrees-度', 'imperial-英制单位', 'nautical-海里', 'metric-米', 'us',默认值'metric'
  className: 'custome-scale-line', // 自定义css类样式名
  // minWidth: 200,// 最小宽度
  target: document.querySelector("#custome-scale-line"), // 放置比例尺控件的目标容器
})

const map = new ol.Map({
  target: 'map',
  loadTilesWhileInteracting: true,
  view: new ol.View({
    center: [11421771, 4288300],
    zoom: 5,
    worldsWrap: true,
    minZoom: 1,
    maxZoom: 20,
    projection: 'EPSG:3857',
  }),
  // 鼠标控件：鼠标在地图上移动时显示坐标信息。
  controls: ol.control.defaults.defaults().extend([
    // 加载鼠标控件
    new ol.control.MousePosition(),

    // 加载比例尺控件
    // scaleLineControl
  ]),
})
// 后加载比例尺控件
map.addControl(scaleLineControl)

const gaodeLayer = new ol.layer.Tile({
  source: new ol.source.XYZ({
    title: '高德',
    url: 'http://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=7&x={x}&y={y}&z={z}',
  }),
})
map.addLayer(gaodeLayer)

// =============================
</script>
<style>
* {
  padding: 0;
  margin: 0;
  font-size: 14px;
  font-family: '微软雅黑';
}

html,
body {
  width: 100%;
  height: 100%;
}

#map {
  position: absolute;
  width: 100%;
  height: 100%;
}

.ol-zoom {
  position: absolute;
  right: 16px;
  bottom: 16px;
  top: auto;
  left: auto;
}

#custome-scale-line {
  position: absolute;
  right: 24px;
  bottom: 16px;
  width: 200px;
  text-align: center;
  color: #fff;
  border-radius: 5px;
}

.custome-scale-line-inner {
  margin: 1px;
  border: 1px solid #eee;
  border-top: none;
  color: #eee;
  font-size: 10px;
  text-align: center;
  background: #060505ba;
  will-change: contents, width;
}
</style>

<!-- Settings Section - 设置数据，将被自动解析 -->
<settings>
<head-metadata>

</head-metadata>
<css-links>

</css-links>
<js-links>

</js-links>
</settings>
